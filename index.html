<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>9 Tiles</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <h1>9 TILES</h1>
    </header>
    <main>
      <div>
        <table id="board"></table>
      </div>
      <div></div>
    </main>
  </body>
  <script>
    // Initial board
    let board = [
      [1, 0, 2],
      [4, 5, 3],
      [7, 8, 6],
    ];

    // Goal board
    let goalBoard = [
      [1, 2, 3],
      [4, 5, 6],
      [7, 8, 0],
    ];

    // UI 
    plotBoard(board);

    function plotBoard(board) {
      const table = document.getElementById("board");
      table.innerHTML = "";

      board.forEach((row, rowIndex) => {
        const tr = document.createElement("tr");

        row.forEach((cell, colIndex) => {
          const td = document.createElement("td");
          td.setAttribute("draggable", true);
          td.dataset.row = rowIndex;
          td.dataset.col = colIndex;

          td.textContent = cell === 0 ? "" : cell;

          td.addEventListener("dragstart", handleDragStart);
          td.addEventListener("dragover", handleDragOver);
          td.addEventListener("dragleave", handleDragLeave);
          td.addEventListener("drop", handleDrop);

          tr.appendChild(td);
        });

        table.appendChild(tr);
      });
    }

    let dragSrc = null;

    function handleDragStart(e) {
      dragSrc = this;
    }

    function handleDragOver(e) {
      e.preventDefault();
      this.classList.add("drag-over");
    }

    function handleDragLeave() {
      this.classList.remove("drag-over");
    }

    function handleDrop(e) {
      e.preventDefault();
      this.classList.remove("drag-over");

      if (!dragSrc || dragSrc === this) return;

      const fromRow = parseInt(dragSrc.dataset.row);
      const fromCol = parseInt(dragSrc.dataset.col);
      const toRow = parseInt(this.dataset.row);
      const toCol = parseInt(this.dataset.col);

      const temp = board[fromRow][fromCol];
      board[fromRow][fromCol] = board[toRow][toCol];
      board[toRow][toCol] = temp;

      plotBoard(board);
    }
  </script>
</html>
